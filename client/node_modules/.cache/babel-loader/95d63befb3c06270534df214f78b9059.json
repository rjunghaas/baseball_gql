{"ast":null,"code":"import _slicedToArray from \"/Users/Ryan/Desktop/baseball_gql/webapp-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/Ryan/Desktop/baseball_gql/webapp-hooks/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/Ryan/Desktop/baseball_gql/webapp-hooks/src/components/NameSearch.tsx\";\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  {\\n    query getSearchStr($typename: String!){\\n      __typename: $typename\\n      searchStr @client\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  query PlayerId($searchStr: String!){\\n    getPlayer(searchStr: $searchStr){\\n      name\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport { gql } from 'apollo-boost';\nimport { useLazyQuery, useApolloClient } from '@apollo/react-hooks';\nconst PLAYER_QUERY = gql(_templateObject());\nconst GET_SEARCHSTR = gql(_templateObject2());\n\n// NameSearch function for taking text entered and searching for closest player\n// whose name matches the text\nfunction NameSearch() {\n  // Initialize ApolloClient so we can get access to ApolloProvider's cache\n  const client = useApolloClient();\n  let cache = client.cache;\n\n  const _useLazyQuery = useLazyQuery(PLAYER_QUERY),\n        _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n        getPlayer = _useLazyQuery2[0],\n        _useLazyQuery2$ = _useLazyQuery2[1],\n        error = _useLazyQuery2$.error,\n        data = _useLazyQuery2$.data;\n\n  function updatePlayer(searchStr) {\n    console.log(cache.readQuery({\n      query: GET_SEARCHSTR,\n      __typename: 'Player'\n    }));\n    let newSearchStr = '' + searchStr;\n    console.log(newSearchStr);\n    getPlayer({\n      variables: {\n        searchStr: newSearchStr\n      }\n    }); // handle error state\n\n    if (error) {\n      console.warn(error);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"`Error! $\", error.message, \"`\");\n    }\n\n    if (data) {\n      cache.writeData({\n        data: {\n          __typename: 'Player',\n          searchStr: newSearchStr,\n          name: data.getPlayer.name,\n          id: data.getPlayer.id\n        }\n      });\n    }\n\n    console.log(cache);\n    return null;\n  }\n\n  ; // Render JSX element and insert data\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter Player's Name\",\n    value: data ? data.getPlayer.searchStr : '',\n    onChange: e => {\n      e.preventDefault();\n      updatePlayer(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, data ? data.getPlayer.name : ''));\n}\n\n;\nexport default NameSearch;","map":{"version":3,"sources":["/Users/Ryan/Desktop/baseball_gql/webapp-hooks/src/components/NameSearch.tsx"],"names":["React","gql","useLazyQuery","useApolloClient","PLAYER_QUERY","GET_SEARCHSTR","NameSearch","client","cache","getPlayer","error","data","updatePlayer","searchStr","console","log","readQuery","query","__typename","newSearchStr","variables","warn","message","writeData","name","id","e","preventDefault","target","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,YAAT,EAAuBC,eAAvB,QAA8C,qBAA9C;AAEA,MAAMC,YAAY,GAAGH,GAAH,mBAAlB;AASA,MAAMI,aAAa,GAAGJ,GAAH,oBAAnB;;AAoBA;AACA;AACA,SAASK,UAAT,GAA2B;AACzB;AACA,QAAMC,MAAM,GAAGJ,eAAe,EAA9B;AACA,MAAIK,KAAK,GAAGD,MAAM,CAACC,KAAnB;;AAHyB,wBAIYN,YAAY,CAACE,YAAD,CAJxB;AAAA;AAAA,QAIlBK,SAJkB;AAAA;AAAA,QAILC,KAJK,mBAILA,KAJK;AAAA,QAIEC,IAJF,mBAIEA,IAJF;;AAMzB,WAASC,YAAT,CAAsBC,SAAtB,EAAwC;AACtCC,IAAAA,OAAO,CAACC,GAAR,CAAYP,KAAK,CAACQ,SAAN,CAAgB;AAACC,MAAAA,KAAK,EAAEZ,aAAR;AAAuBa,MAAAA,UAAU,EAAE;AAAnC,KAAhB,CAAZ;AACA,QAAIC,YAAmB,GAAG,KAAKN,SAA/B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYI,YAAZ;AAEAV,IAAAA,SAAS,CAAC;AAACW,MAAAA,SAAS,EAAE;AAACP,QAAAA,SAAS,EAAEM;AAAZ;AAAZ,KAAD,CAAT,CALsC,CAOtC;;AACA,QAAIT,KAAJ,EAAW;AACTI,MAAAA,OAAO,CAACO,IAAR,CAAaX,KAAb;AACA,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAeA,KAAK,CAACY,OAArB,MAAR;AACD;;AAED,QAAGX,IAAH,EAAQ;AACNH,MAAAA,KAAK,CAACe,SAAN,CAAgB;AACdZ,QAAAA,IAAI,EAAE;AACJO,UAAAA,UAAU,EAAE,QADR;AAEJL,UAAAA,SAAS,EAAEM,YAFP;AAGJK,UAAAA,IAAI,EAAEb,IAAI,CAACF,SAAL,CAAee,IAHjB;AAIJC,UAAAA,EAAE,EAAEd,IAAI,CAACF,SAAL,CAAegB;AAJf;AADQ,OAAhB;AAQD;;AAEDX,IAAAA,OAAO,CAACC,GAAR,CAAYP,KAAZ;AACA,WAAO,IAAP;AACD;;AAAA,GAhCwB,CAkCzB;;AACA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,WAAW,EAAC,qBAA/B;AAAqD,IAAA,KAAK,EAAEG,IAAI,GAAGA,IAAI,CAACF,SAAL,CAAeI,SAAlB,GAA8B,EAA9F;AAAkG,IAAA,QAAQ,EAAEa,CAAC,IAAI;AAACA,MAAAA,CAAC,CAACC,cAAF;AAAoBf,MAAAA,YAAY,CAACc,CAAC,CAACE,MAAF,CAASC,KAAV,CAAZ;AAA6B,KAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKlB,IAAI,GAAGA,IAAI,CAACF,SAAL,CAAee,IAAlB,GAAyB,EAAlC,CAHF,CADF;AAOD;;AAAA;AAED,eAAelB,UAAf","sourcesContent":["import React from \"react\";\nimport { gql } from 'apollo-boost';\nimport { useLazyQuery, useApolloClient } from '@apollo/react-hooks';\n\nconst PLAYER_QUERY = gql`\n  query PlayerId($searchStr: String!){\n    getPlayer(searchStr: $searchStr){\n      name\n      id\n    }\n  }\n`;\n\nconst GET_SEARCHSTR = gql`\n  {\n    query getSearchStr($typename: String!){\n      __typename: $typename\n      searchStr @client\n    }\n  }\n`;\n\ntype playerQueryObj = {\n  __typename: string,\n  searchStr: string,\n  name: string,\n  id: number\n};\n\ntype searchStrReturnObj = {\n  searchStr:string\n}\n\n// NameSearch function for taking text entered and searching for closest player\n// whose name matches the text\nfunction NameSearch(): any {\n  // Initialize ApolloClient so we can get access to ApolloProvider's cache\n  const client = useApolloClient();\n  let cache = client.cache;\n  const [getPlayer, { error, data }] = useLazyQuery(PLAYER_QUERY);\n\n  function updatePlayer(searchStr:string) {\n    console.log(cache.readQuery({query: GET_SEARCHSTR, __typename: 'Player'}));\n    let newSearchStr:string = '' + searchStr;\n    console.log(newSearchStr);\n\n    getPlayer({variables: {searchStr: newSearchStr}});\n\n    // handle error state\n    if (error) {\n      console.warn(error);\n      return (<div>`Error! ${error.message}`</div>);\n    }\n\n    if(data){\n      cache.writeData({\n        data: {\n          __typename: 'Player',\n          searchStr: newSearchStr,\n          name: data.getPlayer.name,\n          id: data.getPlayer.id,\n        }\n      });\n    }\n\n    console.log(cache);\n    return null;\n  };\n\n  // Render JSX element and insert data\n  return (\n    <div>\n      <input type=\"text\" placeholder=\"Enter Player's Name\" value={data ? data.getPlayer.searchStr : ''} onChange={e => {e.preventDefault(); updatePlayer(e.target.value)}}/>\n      <br/>\n      <h3>{data ? data.getPlayer.name : ''}</h3>\n    </div>\n  )\n};\n\nexport default NameSearch;\n"]},"metadata":{},"sourceType":"module"}